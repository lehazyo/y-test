(this["webpackJsonpy-test-04"]=this["webpackJsonpy-test-04"]||[]).push([[0],{27:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var n,c=r(0),a=r.n(c),s=r(3),o=r.n(s),i=r(2),l=r(4),u=r(5),d=r(7),h=r(6);!function(e){e.SET_SEARCH_QUERY="SET_SEARCH_QUERY",e.SET_LOADING="SET_LOADING"}(n||(n={}));var p,b=function(e){return{type:n.SET_SEARCH_QUERY,payload:e}},j=function(e){return{type:n.SET_LOADING,payload:void 0===e||e}},f=(r(27),r(1)),v=function(){return Object(f.jsx)("div",{className:"search-results--no-search-yet",children:"\u0412\xa0\u043d\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435 10\xa0000\xa0000\xa0000 \u043a\u043d\u0438\u0433 \u0438\u0437\xa0\u0432\u0441\u0435\u0445 \u0441\u0442\u0440\u0430\u043d \u0438\xa0\u044d\u043f\u043e\u0445"})},O=(r(29),function(e){var t=e.previousSearch;return Object(f.jsxs)("div",{className:"no-results-found--wrapper",children:["\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \xab",t,"\xbb \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"]})}),m=(r(30),function(e){var t=e.authors,r=e.details;if(void 0===t||!t.length)return null;var n="";r&&(n=t.length>1?"\u0410\u0432\u0442\u043e\u0440\u044b: ":"\u0410\u0432\u0442\u043e\u0440: ");var c=["authors-block--wrapper"];return r&&c.push("authors-block--wrapper_details"),Object(f.jsxs)("div",{className:c.join(" "),children:[n,t.join(", ")]})}),g=["title","titleId"];function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}function x(e,t){var r=e.title,n=e.titleId,a=k(e,g);return c.createElement("svg",y({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 101.37",style:{enableBackground:"new 0 0 122.88 101.37"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},a),r?c.createElement("title",{id:n},r):null,p||(p=c.createElement("g",null,c.createElement("path",{d:"M12.64,77.27l0.31-54.92h-6.2v69.88c8.52-2.2,17.07-3.6,25.68-3.66c7.95-0.05,15.9,1.06,23.87,3.76 c-4.95-4.01-10.47-6.96-16.36-8.88c-7.42-2.42-15.44-3.22-23.66-2.52c-1.86,0.15-3.48-1.23-3.64-3.08 C12.62,77.65,12.62,77.46,12.64,77.27L12.64,77.27z M103.62,19.48c-0.02-0.16-0.04-0.33-0.04-0.51c0-0.17,0.01-0.34,0.04-0.51V7.34 c-7.8-0.74-15.84,0.12-22.86,2.78c-6.56,2.49-12.22,6.58-15.9,12.44V85.9c5.72-3.82,11.57-6.96,17.58-9.1 c6.85-2.44,13.89-3.6,21.18-3.02V19.48L103.62,19.48z M110.37,15.6h9.14c1.86,0,3.37,1.51,3.37,3.37v77.66 c0,1.86-1.51,3.37-3.37,3.37c-0.38,0-0.75-0.06-1.09-0.18c-9.4-2.69-18.74-4.48-27.99-4.54c-9.02-0.06-18.03,1.53-27.08,5.52 c-0.56,0.37-1.23,0.57-1.92,0.56c-0.68,0.01-1.35-0.19-1.92-0.56c-9.04-4-18.06-5.58-27.08-5.52c-9.25,0.06-18.58,1.85-27.99,4.54 c-0.34,0.12-0.71,0.18-1.09,0.18C1.51,100.01,0,98.5,0,96.64V18.97c0-1.86,1.51-3.37,3.37-3.37h9.61l0.06-11.26 c0.01-1.62,1.15-2.96,2.68-3.28l0,0c8.87-1.85,19.65-1.39,29.1,2.23c6.53,2.5,12.46,6.49,16.79,12.25 c4.37-5.37,10.21-9.23,16.78-11.72c8.98-3.41,19.34-4.23,29.09-2.8c1.68,0.24,2.88,1.69,2.88,3.33h0V15.6L110.37,15.6z M68.13,91.82c7.45-2.34,14.89-3.3,22.33-3.26c8.61,0.05,17.16,1.46,25.68,3.66V22.35h-5.77v55.22c0,1.86-1.51,3.37-3.37,3.37 c-0.27,0-0.53-0.03-0.78-0.09c-7.38-1.16-14.53-0.2-21.51,2.29C79.09,85.15,73.57,88.15,68.13,91.82L68.13,91.82z M58.12,85.25 V22.46c-3.53-6.23-9.24-10.4-15.69-12.87c-7.31-2.8-15.52-3.43-22.68-2.41l-0.38,66.81c7.81-0.28,15.45,0.71,22.64,3.06 C47.73,78.91,53.15,81.64,58.12,85.25L58.12,85.25z"}))))}var w,N=c.forwardRef(x),S=(r.p,r(31),function(e){var t=e.details;return Object(f.jsx)("figure",{className:"book-cover book-cover-empty--wrapper".concat(t?" book-cover_details":""),children:Object(f.jsx)(N,{className:"book-cover-empty--icon"})})}),L=(r(32),function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={isLoading:!0},n}return Object(u.a)(r,[{key:"imageHasLoaded",value:function(){this.setState({isLoading:!1})}},{key:"coverClassNames",value:function(){var e=["book-cover","book-cover--wrapper"];return this.state.isLoading&&e.push("book-cover_loading"),this.props.details&&e.push("book-cover_details"),e.join(" ")}},{key:"render",value:function(){var e=this,t=this.props.details?"L":"S";return Object(f.jsx)("figure",{className:this.coverClassNames(),children:Object(f.jsx)("img",{alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043a\u043d\u0438\u0433\u0438 ".concat(this.props.title),className:"book-cover--img",src:"http://covers.openlibrary.org/b/id/".concat(this.props.cover,"-").concat(t,".jpg"),onLoad:function(){return e.imageHasLoaded()}})})}}]),r}(a.a.Component)),R=function(e){var t=e.title,r=e.cover,n=e.details;return void 0===r?Object(f.jsx)(S,{details:n}):Object(f.jsx)(L,{title:t,cover:r,details:n})},E=(r(33),function(e){var t=e.title,r=e.cover,n=e.authors,c=e.onClick;return Object(f.jsxs)("li",{className:"book-preview--wrapper",onClick:c,children:[Object(f.jsx)(R,{title:t,cover:r}),Object(f.jsxs)("div",{className:"book-preview--info",children:[Object(f.jsx)("header",{className:"book-preview--title",children:t}),Object(f.jsx)(m,{authors:n})]})]})}),C=function(e){var t=e.match(/\d\d\d\d/),r=e.match(/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/),n=e.match(/(?<!\d)\d(\d)?(?!\d)/),c=null!==t?t[0]:"",a=null!==n?n[0]:"",s="";if(null!==r)switch(r[0]){case"Jan":s=""===a?"\u042f\u043d\u0432\u0430\u0440\u044c":"\u044f\u043d\u0432\u0430\u0440\u044f";break;case"Feb":s=""===a?"\u0424\u0435\u0432\u0440\u0430\u043b\u044c":"\u0444\u0435\u0432\u0440\u0430\u043b\u044f";break;case"Mar":s=""===a?"\u041c\u0430\u0440\u0442":"\u043c\u0430\u0440\u0442\u0430";break;case"Apr":s=""===a?"\u0410\u043f\u0440\u0435\u043b\u044c":"\u0430\u043f\u0440\u0435\u043b\u044f";break;case"May":s=""===a?"\u041c\u0430\u0439":"\u043c\u0430\u044f";break;case"Jun":s=""===a?"\u0418\u044e\u043d\u044c":"\u0438\u044e\u043d\u044f";break;case"Jul":s=""===a?"\u0418\u044e\u043b\u044c":"\u0438\u044e\u043b\u044f";break;case"Aug":s=""===a?"\u0410\u0432\u0433\u0443\u0441\u0442":"\u0430\u0432\u0433\u0443\u0441\u0442\u0430";break;case"Sep":s=""===a?"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c":"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f";break;case"Oct":s=""===a?"\u041e\u043a\u0442\u044f\u0431\u0440\u044c":"\u043e\u043a\u0442\u044f\u0431\u0440\u044f";break;case"Nov":s=""===a?"\u041d\u043e\u044f\u0431\u0440\u044c":"\u043d\u043e\u044f\u0431\u0440\u044f";break;case"Dec":s=""===a?"\u0414\u0435\u043a\u0430\u0431\u0440\u044c":"\u0434\u0435\u043a\u0430\u0431\u0440\u044f";break;default:s=""}return[a,s,c].join(" ")},_=(r(34),function(e){var t=e.title,r=e.authors,n=e.cover,c=e.docs,a=null,s=null,o=null;if(c.length){var i=c[0],l=i.publish_date,u=i.publisher,d=i.isbn;void 0!==l&&l.length&&(a=Object(f.jsxs)("div",{className:"book-details--publish-date",children:["\u0414\u0430\u0442\u0430 \u0438\u0437\u0434\u0430\u043d\u0438\u044f: ",C(l[0])]})),void 0!==u&&u.length&&(s=Object(f.jsxs)("div",{className:"book-details--publisher",children:["\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c: ",u[0]]})),void 0!==d&&d.length&&(o=Object(f.jsxs)("div",{className:"book-details--isbn",children:["ISBN: ",d[0]]}))}return Object(f.jsxs)("section",{className:"book-details--wrapper",children:[Object(f.jsx)(R,{title:t,cover:n,details:!0}),Object(f.jsxs)("div",{className:"book-details--info",children:[Object(f.jsx)("header",{className:"book-details--title",children:t}),Object(f.jsx)(m,{authors:r,details:!0}),a,s,o]})]})}),Q=r(15),I=(r(35),function(e,t){var r=e%100,n=e%10;return r>10&&r<20?t[2]:n>1&&n<5?t[1]:1===n?t[0]:t[2]}),T=r(13),M=Object(i.b)(null,(function(e){return{setLoading:function(t){e(j(t))}}}))(function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={modalOpen:!1,modalContent:null},n}return Object(u.a)(r,[{key:"openModalForBook",value:function(e,t,r){var n=this,c=encodeURIComponent(e),a=void 0!==t?"&author=".concat(encodeURIComponent(t.join(","))):"",s="http://openlibrary.org/search.json?title=".concat(c,"&fields=").concat(["publish_date","publisher","isbn"].join(",")).concat(a);fetch(s).then((function(e){if(!e.ok)throw n.props.setLoading(!1),new Error(e.statusText);return e.json()})).then((function(c){return n.parseDetails(c,e,t,r)})).catch((function(e){throw n.props.setLoading(!1),new Error(e)}))}},{key:"parseDetails",value:function(e,t,r,n){this.setState({modalOpen:!0,modalContent:Object(f.jsx)(_,{title:t,authors:r,cover:n,docs:e.docs})}),this.props.setLoading(!1)}},{key:"render",value:function(){var e=this,t="".concat(I(this.props.totalResults,["\u041d\u0430\u0439\u0434\u0435\u043d","\u041d\u0430\u0439\u0434\u0435\u043d\u043e","\u041d\u0430\u0439\u0434\u0435\u043d\u043e"])," ").concat(this.props.totalResults,"\xa0").concat(I(this.props.totalResults,["\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442","\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430","\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"])," \u043f\u043e\xa0\u0437\u0430\u043f\u0440\u043e\u0441\u0443 \xab").concat(this.props.previousSearch,"\xbb");return Object(f.jsxs)("section",{className:"found-results--wrapper",children:[Object(f.jsx)("header",{className:"found-results--header",children:t}),Object(f.jsx)("ul",{className:"found-results--list",children:this.props.foundResults.map((function(t){return Object(f.jsx)(E,{title:t.title,authors:t.author_name,cover:t.cover_i,onClick:function(){e.props.setLoading(),e.openModalForBook(t.title,t.author_name,t.cover_i)}},Object(Q.a)())}))}),Object(f.jsx)(T.a,{open:this.state.modalOpen,onClose:function(){e.setState({modalOpen:!1})},center:!0,children:this.state.modalContent})]})}}]),r}(a.a.Component)),A=(r(37),r(38),Object(i.b)(null,(function(e){return{setLoading:function(t){e(j(t))}}}))(function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).searchQuery=void 0,n.state={previousSearch:void 0,foundResults:[],totalResults:0},n}return Object(u.a)(r,[{key:"componentDidUpdate",value:function(){this.checkSearchChanged()}},{key:"performSearch",value:function(e){this.setState({previousSearch:e}),this.props.setLoading(),this.fetchBooks(e)}},{key:"fetchBooks",value:function(e){var t=this,r=encodeURIComponent(e),n="http://openlibrary.org/search.json?fields=".concat(["title","cover_i","author_name"].join(","),"&q=").concat(r);fetch(n).then((function(e){if(!e.ok)throw t.props.setLoading(!1),new Error(e.statusText);return e.json()})).then((function(e){return t.parseSearchResults(e)})).catch((function(e){throw t.props.setLoading(!1),new Error(e)}))}},{key:"checkSearchChanged",value:function(){this.state.previousSearch!==this.props.searchQuery&&void 0!==this.props.searchQuery&&""!==this.props.searchQuery&&(console.log("query is",this.props.searchQuery),this.performSearch(this.props.searchQuery))}},{key:"parseSearchResults",value:function(e){this.setState({foundResults:e.docs,totalResults:e.numFound}),this.props.setLoading(!1)}},{key:"selectBlockToRender",value:function(){return void 0===this.props.searchQuery?Object(f.jsx)(v,{}):void 0===this.state.previousSearch?null:this.state.foundResults.length?Object(f.jsx)(M,{previousSearch:this.state.previousSearch,foundResults:this.state.foundResults,totalResults:this.state.totalResults}):Object(f.jsx)(O,{previousSearch:this.state.previousSearch})}},{key:"render",value:function(){return Object(f.jsx)("section",{className:"search-results--wrapper",children:this.selectBlockToRender()})}}]),r}(a.a.Component))),B=["title","titleId"];function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}function U(e,t){var r=e.title,n=e.titleId,a=J(e,B);return c.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:30.239,height:30.239,viewBox:"0 0 30.239 30.239",ref:t,"aria-labelledby":n},a),r?c.createElement("title",{id:n},r):null,w||(w=c.createElement("path",{d:"M20.194 3.46c-4.613-4.613-12.121-4.613-16.734 0-4.612 4.614-4.612 12.121 0 16.735 4.108 4.107 10.506 4.547 15.116 1.34.097.459.319.897.676 1.254l6.718 6.718a2.498 2.498 0 003.535 0 2.496 2.496 0 000-3.535l-6.718-6.72a2.5 2.5 0 00-1.253-.674c3.209-4.611 2.769-11.008-1.34-15.118zm-2.121 14.614c-3.444 3.444-9.049 3.444-12.492 0-3.442-3.444-3.442-9.048 0-12.492 3.443-3.443 9.048-3.443 12.492 0 3.444 3.444 3.444 9.048 0 12.492z"})))}var z=c.forwardRef(U),V=(r.p,r(39),Object(i.b)((function(e){return{searchQuery:e.searchQuery}}),(function(e){return{setSearchQuery:function(t){e(b(t))}}}))((function(e){var t,r=e.setSearchQuery,n=a.a.createRef(),c=function(e){return r(e)},s=function(){null!==n.current&&c(n.current.value)};return Object(f.jsxs)("div",{className:"search-field--wrapper",children:[Object(f.jsx)("input",{className:"search-field--input",type:"text","aria-label":"\u041f\u043e\u043b\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, \u0430\u0432\u0442\u043e\u0440\u0443, ISBN",ref:n,onChange:function(){clearTimeout(t),t=setTimeout(s,1e3)},onKeyDown:function(e){"Enter"!==e.key&&"Return"!==e.key||(clearTimeout(t),s())}}),Object(f.jsx)("button",{className:"search-field--submit",onClick:function(){clearTimeout(t),null!==n.current&&c(n.current.value)},children:Object(f.jsx)(z,{className:"search-field--icon"})})]})}))),H=(r(40),function(){return Object(f.jsx)("section",{className:"search-block--wrapper",children:Object(f.jsx)(V,{})})}),P=(r(41),function(){return Object(f.jsxs)("header",{className:"top-bar--wrapper",children:[Object(f.jsx)("div",{className:"top-bar--title-wrapper",children:Object(f.jsx)("h1",{className:"top-bar--title",children:"\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0431\u043e"})}),Object(f.jsx)(H,{})]})}),F=(r(42),Object(i.b)((function(e){return{isLoading:e.isLoading}}))((function(e){var t=e.isLoading;return Object(f.jsx)("div",{className:"loading-indicator--wrapper".concat(t?" loading":""),children:Object(f.jsx)("div",{className:"loading-indiator--icon-wrapper",children:Object(f.jsxs)("div",{className:"loading-indiator--book-wrapper",children:[Object(f.jsx)("div",{className:"loading-indiator--book-page left"}),Object(f.jsx)("div",{className:"loading-indiator--book-page right"}),Object(f.jsx)("div",{className:"loading-indiator--book-page middle"}),Object(f.jsx)("div",{className:"loading-indiator--book-cover left"}),Object(f.jsx)("div",{className:"loading-indiator--book-cover right"})]})})})}))),G=(r(43),Object(i.b)((function(e){return{searchQuery:e.searchQuery}}))((function(e){var t=e.searchQuery;return Object(f.jsx)("div",{className:"app--wrapper",children:Object(f.jsxs)("div",{className:"main-block--wrapper",children:[Object(f.jsx)(P,{}),Object(f.jsx)(A,{searchQuery:t}),Object(f.jsx)(F,{})]})})}))),Y=function(e,t){return Object.assign({},e,t)},q={searchQuery:void 0,isLoading:!1},K=r(14);o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(i.a,{store:Object(K.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_SEARCH_QUERY:return Y(e,{searchQuery:t.payload});case n.SET_LOADING:return Y(e,{isLoading:t.payload});default:return e}})),children:Object(f.jsx)(G,{})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.26061230.chunk.js.map