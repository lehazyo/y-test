{"version":3,"sources":["redux/actions.ts","icons/open-book.svg","components/search-results/no-search-performed-yet/no-search-performed-yet.tsx","components/search-results/no-results-found/no-results-found.tsx","components/authors-block/authors-block.tsx","icons/magnifying-glass.svg","components/book-cover/book-cover-empty/book-cover-empty.tsx","components/book-cover/book-cover-image/book-cover-image.tsx","components/book-cover/book-cover.tsx","components/book-preview/book-preview.tsx","utils/convert-en-date-to-ru.ts","components/book-details/book-details.tsx","utils/declination-by-number.ts","components/search-results/found-results/found-results.tsx","components/search-results/search-results.tsx","components/search-field/search-field.tsx","components/search-block/search-block.tsx","components/top-bar/top-bar.tsx","components/loading-indicator/loading-indicator.tsx","app.tsx","utils/extend.ts","redux/reducer.ts","index.js"],"names":["ActionType","_g","ActionCreator","searchQuery","type","SET_SEARCH_QUERY","payload","isLoading","SET_LOADING","undefined","NoSearchPerformedYet","className","NoResultsFound","previousSearch","AuthorsBlock","authors","details","length","labelBlock","classNames","push","join","_excluded","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgOpenBook","_ref","svgRef","title","titleId","props","id","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","ref","d","_path","ForwardRef","BookCoverEmpty","BookCoverImage","state","setState","coverClassNames","thumbSize","alt","src","cover","onLoad","imageHasLoaded","React","Component","BookCover","BookPreview","onClick","convertEnDateToRu","rawDate","presumedYearMatch","match","monthMatch","presumedDayMatch","yearBlock","dayBlock","monthBlock","BookDetails","docs","publishDateBlock","publisherBlock","isbnBlock","publishDate","publish_date","publisher","isbn","declinationByNumber","n","words","mod100","mod10","connector","connect","dispatch","setLoading","modalOpen","modalContent","author_name","encodedTitle","encodeURIComponent","encodedAuthorBlock","requestUrl","fetch","then","response","ok","Error","statusText","json","data","parseDetails","catch","error","headerText","totalResults","foundResults","map","result","cover_i","openModalForBook","nanoid","open","onClose","center","checkSearchChanged","rawQuery","fetchBooks","encodedQuery","parseSearchResults","console","log","performSearch","numFound","selectBlockToRender","SvgMagnifyingGlass","width","height","setSearchQuery","searchTimeout","inputRef","createRef","submitSearch","value","checkRefAndSubmit","current","placeholder","onChange","clearTimeout","setTimeout","onKeyDown","event","SearchBlock","TopBar","extend","a","b","initialState","ReactDOM","render","StrictMode","store","createStore","action","document","getElementById"],"mappings":"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","file":"static/js/main.26061230.chunk.js","sourcesContent":["export enum ActionType {\r\n  SET_SEARCH_QUERY = 'SET_SEARCH_QUERY',\r\n  SET_LOADING = 'SET_LOADING',\r\n};\r\n\r\nexport type ReduxAction = {\r\n  type: ActionType;\r\n  payload: any;\r\n};\r\n\r\nexport const ActionCreator = {\r\n  setSearchQuery: (searchQuery?: string): ReduxAction => ({\r\n    type: ActionType.SET_SEARCH_QUERY,\r\n    payload: searchQuery\r\n  }),\r\n  setLoading: (isLoading?: boolean): ReduxAction => ({\r\n    type: ActionType.SET_LOADING,\r\n    payload: (isLoading === undefined) ? true : isLoading,\r\n  })\r\n};\r\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOpenBook(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 122.88 101.37\",\n    style: {\n      enableBackground: \"new 0 0 122.88 101.37\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.64,77.27l0.31-54.92h-6.2v69.88c8.52-2.2,17.07-3.6,25.68-3.66c7.95-0.05,15.9,1.06,23.87,3.76 c-4.95-4.01-10.47-6.96-16.36-8.88c-7.42-2.42-15.44-3.22-23.66-2.52c-1.86,0.15-3.48-1.23-3.64-3.08 C12.62,77.65,12.62,77.46,12.64,77.27L12.64,77.27z M103.62,19.48c-0.02-0.16-0.04-0.33-0.04-0.51c0-0.17,0.01-0.34,0.04-0.51V7.34 c-7.8-0.74-15.84,0.12-22.86,2.78c-6.56,2.49-12.22,6.58-15.9,12.44V85.9c5.72-3.82,11.57-6.96,17.58-9.1 c6.85-2.44,13.89-3.6,21.18-3.02V19.48L103.62,19.48z M110.37,15.6h9.14c1.86,0,3.37,1.51,3.37,3.37v77.66 c0,1.86-1.51,3.37-3.37,3.37c-0.38,0-0.75-0.06-1.09-0.18c-9.4-2.69-18.74-4.48-27.99-4.54c-9.02-0.06-18.03,1.53-27.08,5.52 c-0.56,0.37-1.23,0.57-1.92,0.56c-0.68,0.01-1.35-0.19-1.92-0.56c-9.04-4-18.06-5.58-27.08-5.52c-9.25,0.06-18.58,1.85-27.99,4.54 c-0.34,0.12-0.71,0.18-1.09,0.18C1.51,100.01,0,98.5,0,96.64V18.97c0-1.86,1.51-3.37,3.37-3.37h9.61l0.06-11.26 c0.01-1.62,1.15-2.96,2.68-3.28l0,0c8.87-1.85,19.65-1.39,29.1,2.23c6.53,2.5,12.46,6.49,16.79,12.25 c4.37-5.37,10.21-9.23,16.78-11.72c8.98-3.41,19.34-4.23,29.09-2.8c1.68,0.24,2.88,1.69,2.88,3.33h0V15.6L110.37,15.6z M68.13,91.82c7.45-2.34,14.89-3.3,22.33-3.26c8.61,0.05,17.16,1.46,25.68,3.66V22.35h-5.77v55.22c0,1.86-1.51,3.37-3.37,3.37 c-0.27,0-0.53-0.03-0.78-0.09c-7.38-1.16-14.53-0.2-21.51,2.29C79.09,85.15,73.57,88.15,68.13,91.82L68.13,91.82z M58.12,85.25 V22.46c-3.53-6.23-9.24-10.4-15.69-12.87c-7.31-2.8-15.52-3.43-22.68-2.41l-0.38,66.81c7.81-0.28,15.45,0.71,22.64,3.06 C47.73,78.91,53.15,81.64,58.12,85.25L58.12,85.25z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOpenBook);\nexport default __webpack_public_path__ + \"static/media/open-book.a7e63940.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport './no-search-performed-yet.scss';\r\n\r\nexport const NoSearchPerformedYet = () => (\r\n  <div className=\"search-results--no-search-yet\">\r\n    В нашей базе 10 000 000 000 книг из всех стран и эпох\r\n  </div>\r\n);","import React, { FC } from 'react';\r\nimport './no-results-found.scss';\r\n\r\nexport interface NoResultsFoundProps {\r\n  previousSearch: string;\r\n}\r\n\r\nexport const NoResultsFound: FC<NoResultsFoundProps> = ({\r\n  previousSearch\r\n}) => (\r\n  <div className=\"no-results-found--wrapper\">\r\n    Результатов по запросу «{previousSearch}» не найдено\r\n  </div>\r\n);\r\n","import React, { FC } from 'react';\r\nimport './authors-block.scss';\r\n\r\nexport interface AuthorsBlockProps {\r\n  authors?: string[];\r\n  details?: boolean;\r\n}\r\n\r\nexport const AuthorsBlock: FC<AuthorsBlockProps> = ({ authors, details }) => {\r\n  if (authors === undefined || !authors.length) {\r\n    return null;\r\n  }\r\n\r\n  let labelBlock = '';\r\n  if (details) {\r\n    labelBlock = (authors.length > 1)\r\n      ? 'Авторы: '\r\n      : 'Автор: ';\r\n  }\r\n\r\n  const classNames = ['authors-block--wrapper'];\r\n  if (details) {\r\n    classNames.push('authors-block--wrapper_details');\r\n  }\r\n\r\n  return <div className={classNames.join(' ')}>{labelBlock}{authors.join(', ')}</div>;\r\n}","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMagnifyingGlass(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 30.239,\n    height: 30.239,\n    viewBox: \"0 0 30.239 30.239\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20.194 3.46c-4.613-4.613-12.121-4.613-16.734 0-4.612 4.614-4.612 12.121 0 16.735 4.108 4.107 10.506 4.547 15.116 1.34.097.459.319.897.676 1.254l6.718 6.718a2.498 2.498 0 003.535 0 2.496 2.496 0 000-3.535l-6.718-6.72a2.5 2.5 0 00-1.253-.674c3.209-4.611 2.769-11.008-1.34-15.118zm-2.121 14.614c-3.444 3.444-9.049 3.444-12.492 0-3.442-3.444-3.442-9.048 0-12.492 3.443-3.443 9.048-3.443 12.492 0 3.444 3.444 3.444 9.048 0 12.492z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMagnifyingGlass);\nexport default __webpack_public_path__ + \"static/media/magnifying-glass.57a6a33a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { FC } from 'react';\r\nimport { ReactComponent as IcOpenBook } from '../../../icons/open-book.svg';\r\nimport './book-cover-empty.scss';\r\n\r\nexport interface BookCoverEmptyProps {\r\n  details?: boolean;\r\n}\r\n\r\nexport const BookCoverEmpty: FC<BookCoverEmptyProps> = ({ details }) => (\r\n  <figure className={`book-cover book-cover-empty--wrapper${details ? ' book-cover_details' : ''}`}>\r\n    <IcOpenBook className=\"book-cover-empty--icon\" />\r\n  </figure>\r\n)","import React from 'react';\r\nimport './book-cover-image.scss';\r\n\r\nexport interface BookCoverImageProps {\r\n  title: string;\r\n  cover: number;\r\n  details?: boolean;\r\n}\r\n\r\nexport interface BookCoverImageState {\r\n  isLoading: boolean;\r\n}\r\n\r\nexport class BookCoverImage extends React.Component<BookCoverImageProps, BookCoverImageState> {\r\n  constructor(props: BookCoverImageProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isLoading: true,\r\n    };\r\n  }\r\n\r\n  imageHasLoaded() {\r\n    this.setState({\r\n      isLoading: false,\r\n    });\r\n  }\r\n\r\n  coverClassNames(): string {\r\n    const coverClassNames = [\r\n      'book-cover',\r\n      'book-cover--wrapper',\r\n    ];\r\n    if (this.state.isLoading) {\r\n      coverClassNames.push('book-cover_loading');\r\n    }\r\n    if (this.props.details) {\r\n      coverClassNames.push('book-cover_details');\r\n    }\r\n    return coverClassNames.join(' ');\r\n  }\r\n\r\n  render() {\r\n    const thumbSize = (this.props.details) ? 'L' : 'S';\r\n    return (\r\n      <figure className={this.coverClassNames()}>\r\n        <img\r\n          alt={`Обложка книги ${this.props.title}`}\r\n          className=\"book-cover--img\"\r\n          src={`http://covers.openlibrary.org/b/id/${this.props.cover}-${thumbSize}.jpg`}\r\n          onLoad={() => this.imageHasLoaded()}\r\n        />\r\n      </figure>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BookCoverImage;\r\n","import React, { FC } from 'react';\r\nimport { BookCoverEmpty } from './book-cover-empty/book-cover-empty';\r\nimport { BookCoverImage } from './book-cover-image/book-cover-image';\r\n\r\nexport interface BookCoverProps {\r\n  title: string;\r\n  cover?: number;\r\n  details?: boolean;\r\n}\r\n\r\nexport const BookCover: FC<BookCoverProps> = ({ title, cover, details }) => (cover === undefined)\r\n  ? <BookCoverEmpty details={details} />\r\n  : <BookCoverImage title={title} cover={cover} details={details} />;","import React, { FC } from 'react';\r\nimport { AuthorsBlock } from '../authors-block/authors-block';\r\nimport { BookCover } from '../book-cover/book-cover';\r\nimport './book-preview.scss';\r\n\r\nexport interface BookPreviewProps {\r\n  title: string;\r\n  authors?: string[];\r\n  cover?: number;\r\n  onClick?: () => void;\r\n}\r\n\r\nexport const BookPreview: FC<BookPreviewProps> = ({\r\n  title,\r\n  cover,\r\n  authors,\r\n  onClick,\r\n}) => (\r\n  <li\r\n    className=\"book-preview--wrapper\"\r\n    onClick={onClick}\r\n  >\r\n    <BookCover title={title} cover={cover} />\r\n    <div className=\"book-preview--info\">\r\n      <header className=\"book-preview--title\">{title}</header>\r\n      <AuthorsBlock authors={authors} />\r\n    </div>\r\n  </li>\r\n);","export const convertEnDateToRu = (rawDate: string): string => {\r\n  const presumedYearMatch = rawDate.match(/\\d\\d\\d\\d/);\r\n  const monthMatch = rawDate.match(/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/);\r\n  const presumedDayMatch = rawDate.match(/(?<!\\d)\\d(\\d)?(?!\\d)/);\r\n\r\n  const yearBlock = (presumedYearMatch !== null) ? presumedYearMatch[0] : '';\r\n  const dayBlock = (presumedDayMatch !== null) ? presumedDayMatch[0] : '';\r\n  let monthBlock = '';\r\n  if (monthMatch !== null) {\r\n    switch (monthMatch[0]) {\r\n      case 'Jan':\r\n        monthBlock = (dayBlock === '') ? 'Январь' : 'января';\r\n        break;\r\n      case 'Feb':\r\n        monthBlock = (dayBlock === '') ? 'Февраль' : 'февраля';\r\n        break;\r\n      case 'Mar':\r\n        monthBlock = (dayBlock === '') ? 'Март' : 'марта';\r\n        break;\r\n      case 'Apr':\r\n        monthBlock = (dayBlock === '') ? 'Апрель' : 'апреля';\r\n        break;\r\n      case 'May':\r\n        monthBlock = (dayBlock === '') ? 'Май' : 'мая';\r\n        break;\r\n      case 'Jun':\r\n        monthBlock = (dayBlock === '') ? 'Июнь' : 'июня';\r\n        break;\r\n      case 'Jul':\r\n        monthBlock = (dayBlock === '') ? 'Июль' : 'июля';\r\n        break;\r\n      case 'Aug':\r\n        monthBlock = (dayBlock === '') ? 'Август' : 'августа';\r\n        break;\r\n      case 'Sep':\r\n        monthBlock = (dayBlock === '') ? 'Сентябрь' : 'сентября';\r\n        break;\r\n      case 'Oct':\r\n        monthBlock = (dayBlock === '') ? 'Октябрь' : 'октября';\r\n        break;\r\n      case 'Nov':\r\n        monthBlock = (dayBlock === '') ? 'Ноябрь' : 'ноября';\r\n        break;\r\n      case 'Dec':\r\n        monthBlock = (dayBlock === '') ? 'Декабрь' : 'декабря';\r\n        break;\r\n      default:\r\n        monthBlock = '';\r\n    }\r\n  }\r\n\r\n  const convertedDate = [\r\n    dayBlock,\r\n    monthBlock,\r\n    yearBlock,\r\n  ].join(' ');\r\n\r\n  return convertedDate;\r\n}","import React, { FC } from 'react';\r\nimport { DetailsFetchBookDoc } from '../../types/types';\r\nimport { convertEnDateToRu } from '../../utils/convert-en-date-to-ru';\r\nimport { AuthorsBlock } from '../authors-block/authors-block';\r\nimport { BookCover } from '../book-cover/book-cover';\r\nimport './book-details.scss';\r\n\r\nexport interface BookDetailsProps {\r\n  title: string;\r\n  authors: string[];\r\n  cover?: number;\r\n  docs: DetailsFetchBookDoc[],\r\n}\r\n\r\nexport const BookDetails: FC<BookDetailsProps> = ({\r\n  title,\r\n  authors,\r\n  cover,\r\n  docs,\r\n}) => {\r\n  let publishDateBlock = null;\r\n  let publisherBlock = null;\r\n  let isbnBlock = null;\r\n\r\n  if (docs.length) {\r\n    const {\r\n      publish_date: publishDate,\r\n      publisher,\r\n      isbn,\r\n    } = docs[0];\r\n\r\n    if (publishDate !== undefined && publishDate.length) {\r\n      publishDateBlock = <div className=\"book-details--publish-date\">Дата издания: {convertEnDateToRu(publishDate[0])}</div>;\r\n    }\r\n    if (publisher !== undefined && publisher.length) {\r\n      publisherBlock = <div className=\"book-details--publisher\">Издатель: {publisher[0]}</div>;\r\n    }\r\n    if (isbn !== undefined && isbn.length) {\r\n      isbnBlock = <div className=\"book-details--isbn\">ISBN: {isbn[0]}</div>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"book-details--wrapper\">\r\n      <BookCover title={title} cover={cover} details />\r\n      <div className=\"book-details--info\">\r\n        <header className=\"book-details--title\">{title}</header>\r\n        <AuthorsBlock authors={authors} details />\r\n        {publishDateBlock}\r\n        {publisherBlock}\r\n        {isbnBlock}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","export const declinationByNumber = (n: number, words: string[]) => {\r\n  const mod100 = n % 100; \r\n  const mod10 = n % 10;\r\n\r\n  if (mod100 > 10 && mod100 < 20) {\r\n    return words[2];\r\n  }\r\n  if (mod10 > 1 && mod10 < 5) {\r\n    return words[1];\r\n  }\r\n  if (mod10 === 1) {\r\n    return words[0];\r\n  }\r\n  return words[2];\r\n}","import React, { ReactNode } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { ReduxDispatch } from '../../../redux/reducer';\r\nimport { ActionCreator } from '../../../redux/actions';\r\nimport { BookPreview } from '../../book-preview/book-preview';\r\nimport { SearchFetchBook, DetailsFetchBook } from '../../../types/types';\r\nimport { BookDetails } from '../../book-details/book-details';\r\nimport { nanoid } from 'nanoid';\r\nimport './found-results.scss';\r\nimport { declinationByNumber } from '../../../utils/declination-by-number';\r\nimport Modal from 'react-responsive-modal';\r\n\r\nconst mapDispatch = (dispatch: ReduxDispatch) => ({\r\n  setLoading(isLoading?: boolean) {\r\n    dispatch(ActionCreator.setLoading(isLoading));\r\n  }\r\n});\r\n\r\nconst connector = connect(null, mapDispatch);\r\n\r\nexport interface FoundResultsProps extends ConnectedProps<typeof connector> {\r\n  previousSearch?: string;\r\n  foundResults: SearchFetchBook[];\r\n  totalResults: number;\r\n  setLoading: (isLoading?: boolean) => void;\r\n}\r\n\r\nexport interface FoundResultsState {\r\n  modalOpen: boolean;\r\n  modalContent: ReactNode;\r\n}\r\n\r\nclass FoundResults extends React.Component<FoundResultsProps, FoundResultsState> {\r\n  constructor(props: FoundResultsProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      modalOpen: false,\r\n      modalContent: null,\r\n    };\r\n  }\r\n\r\n  openModalForBook(title: string, author_name: string[], cover?: number) {\r\n    const encodedTitle = encodeURIComponent(title);\r\n    const encodedAuthorBlock = (author_name !== undefined)\r\n      ? `&author=${encodeURIComponent(author_name.join(','))}`\r\n      : '';\r\n    const neededFields = [\r\n      'publish_date',\r\n      'publisher',\r\n      'isbn',\r\n    ];\r\n    const requestUrl = `http://openlibrary.org/search.json?title=${encodedTitle}&fields=${neededFields.join(',')}${encodedAuthorBlock}`;\r\n\r\n    fetch(requestUrl)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          this.props.setLoading(false);\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => this.parseDetails(data, title, author_name, cover))\r\n      .catch(error => {\r\n        this.props.setLoading(false);\r\n        throw new Error(error);\r\n      });\r\n  }\r\n\r\n  parseDetails(\r\n    data: DetailsFetchBook,\r\n    title: string,\r\n    authors: string[],\r\n    cover?: number,\r\n  ) {\r\n    this.setState({\r\n      modalOpen: true,\r\n      modalContent: (\r\n        <BookDetails\r\n          title={title}\r\n          authors={authors}\r\n          cover={cover}\r\n          docs={data.docs}\r\n        />\r\n      ),\r\n    });\r\n    this.props.setLoading(false);\r\n  }\r\n\r\n  render() {\r\n    const headerText = `${declinationByNumber(\r\n        this.props.totalResults,\r\n        ['Найден', 'Найдено', 'Найдено']\r\n      )} ${this.props.totalResults} ${declinationByNumber(\r\n        this.props.totalResults,\r\n        ['результат', 'результата', 'результатов']\r\n      )} по запросу «${this.props.previousSearch}»`;\r\n\r\n    return (\r\n      <section className=\"found-results--wrapper\">\r\n        <header className=\"found-results--header\">{headerText}</header>\r\n        <ul className=\"found-results--list\">\r\n          {this.props.foundResults.map((result: SearchFetchBook) => (\r\n            <BookPreview\r\n              key={nanoid()}\r\n              title={result.title}\r\n              authors={result.author_name}\r\n              cover={result.cover_i}\r\n              onClick={() => {\r\n                this.props.setLoading();\r\n                this.openModalForBook(result.title, result.author_name, result.cover_i);\r\n              }}\r\n            />\r\n          ))}\r\n        </ul>\r\n        <Modal open={this.state.modalOpen} onClose={() => { this.setState({ modalOpen: false }) }} center>\r\n          {this.state.modalContent}\r\n        </Modal>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connector(FoundResults);\r\n","import React, { ReactNode } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { ReduxDispatch } from '../../redux/reducer';\r\nimport { ActionCreator } from '../../redux/actions';\r\nimport { NoSearchPerformedYet } from './no-search-performed-yet/no-search-performed-yet';\r\nimport { NoResultsFound } from './no-results-found/no-results-found';\r\nimport FoundResults from './found-results/found-results';\r\nimport { SearchFetchBook, SearchFetchResults } from '../../types/types';\r\nimport 'react-responsive-modal/styles.css';\r\nimport './search-results.scss';\r\n\r\nconst mapDispatch = (dispatch: ReduxDispatch) => ({\r\n  setLoading(isLoading?: boolean) {\r\n    dispatch(ActionCreator.setLoading(isLoading));\r\n  }\r\n});\r\n\r\nconst connector = connect(null, mapDispatch);\r\n\r\nexport interface SearchResultsProps extends ConnectedProps<typeof connector> {\r\n  searchQuery?: string;\r\n  setLoading: (isLoading?: boolean) => void;\r\n}\r\n\r\nexport interface SearchResultsState {\r\n  previousSearch?: string;\r\n  foundResults: SearchFetchBook[];\r\n  totalResults: number;\r\n}\r\n\r\nclass SearchResults extends React.Component<SearchResultsProps, SearchResultsState> {\r\n  searchQuery?: string;\r\n\r\n  constructor(props: SearchResultsProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      previousSearch: undefined,\r\n      foundResults: [],\r\n      totalResults: 0,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.checkSearchChanged();\r\n  }\r\n\r\n  performSearch(rawQuery: string): void {\r\n    this.setState({\r\n      previousSearch: rawQuery,\r\n    });\r\n\r\n    this.props.setLoading();\r\n\r\n    this.fetchBooks(rawQuery);\r\n  }\r\n\r\n  fetchBooks(rawQuery: string) {\r\n    const neededFields = [\r\n      'title',\r\n      'cover_i',\r\n      'author_name',\r\n    ];\r\n\r\n    const encodedQuery = encodeURIComponent(rawQuery);\r\n    const requestUrl = `http://openlibrary.org/search.json?fields=${neededFields.join(',')}&q=${encodedQuery}`;\r\n    fetch(requestUrl)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          this.props.setLoading(false);\r\n          throw new Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => this.parseSearchResults(data))\r\n      .catch(error => {\r\n        this.props.setLoading(false);\r\n        throw new Error(error);\r\n      });\r\n  }\r\n\r\n  checkSearchChanged() {\r\n    if (this.state.previousSearch !== this.props.searchQuery\r\n      && this.props.searchQuery !== undefined\r\n      && this.props.searchQuery !== '')\r\n    {\r\n      console.log('query is', this.props.searchQuery);\r\n      this.performSearch(this.props.searchQuery);\r\n    }\r\n  }\r\n\r\n  parseSearchResults(data: SearchFetchResults) {\r\n    this.setState({\r\n      foundResults: data.docs,\r\n      totalResults: data.numFound,\r\n    });\r\n    this.props.setLoading(false);\r\n  }\r\n\r\n  selectBlockToRender(): ReactNode {\r\n    if (this.props.searchQuery === undefined) {\r\n      return <NoSearchPerformedYet />;\r\n    }\r\n    if (this.state.previousSearch === undefined) {\r\n      return null;\r\n    }\r\n    return (!this.state.foundResults.length)\r\n      ? <NoResultsFound previousSearch={this.state.previousSearch} />\r\n      : (\r\n        <FoundResults\r\n          previousSearch={this.state.previousSearch}\r\n          foundResults={this.state.foundResults}\r\n          totalResults={this.state.totalResults}\r\n        />\r\n      );\r\n  }\r\n\r\n  render () {\r\n    return <section className=\"search-results--wrapper\">{this.selectBlockToRender()}</section>;\r\n  }\r\n};\r\n\r\nexport default connector(SearchResults);\r\n","import React, { FC } from 'react';\r\nimport { ReactComponent as IcSearch } from '../../icons/magnifying-glass.svg';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { ActionCreator } from '../../redux/actions';\r\nimport './search-field.scss';\r\nimport { ReduxDispatch, ReduxState } from '../../redux/reducer';\r\n\r\nconst mapState = (state: ReduxState) => ({\r\n  searchQuery: state.searchQuery,\r\n});\r\n\r\nconst mapDispatch = (dispatch: ReduxDispatch) => ({\r\n  setSearchQuery(searchQuery?: string) {\r\n    dispatch(ActionCreator.setSearchQuery(searchQuery));\r\n  }\r\n});\r\n\r\nconst connector = connect(mapState, mapDispatch);\r\n\r\nexport interface SearchFieldProps extends ConnectedProps<typeof connector> {\r\n  setSearchQuery: (searchQuery?: string) => void;\r\n}\r\n\r\nconst SearchField: FC<SearchFieldProps> = ({ setSearchQuery }) => {\r\n  let searchTimeout: NodeJS.Timeout;\r\n  const searchTimeoutDelay = 1000;\r\n\r\n  const inputRef = React.createRef<HTMLInputElement>();\r\n\r\n  const submitSearch = (value: string): void => setSearchQuery(value);\r\n\r\n  const handleOnClick = () => {\r\n    clearTimeout(searchTimeout);\r\n    if (inputRef.current !== null) {\r\n      submitSearch(inputRef.current.value);\r\n    }\r\n  }\r\n\r\n  const checkRefAndSubmit = () => {\r\n    if (inputRef.current !== null) {\r\n      submitSearch(inputRef.current.value);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.key === 'Enter' || event.key === 'Return') {\r\n      clearTimeout(searchTimeout);\r\n      checkRefAndSubmit();\r\n    }\r\n  }\r\n\r\n  const handleOnChange = (): void => {\r\n    clearTimeout(searchTimeout);\r\n    searchTimeout = setTimeout(checkRefAndSubmit, searchTimeoutDelay);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-field--wrapper\">\r\n      <input\r\n        className=\"search-field--input\"\r\n        type=\"text\"\r\n        aria-label=\"Поле поискового запроса\"\r\n        placeholder=\"Поиск по названию, автору, ISBN\"\r\n        ref={inputRef}\r\n        onChange={handleOnChange}\r\n        onKeyDown={handleKeyDown}\r\n      />\r\n      <button\r\n        className=\"search-field--submit\"\r\n        onClick={handleOnClick}\r\n      >\r\n        <IcSearch className=\"search-field--icon\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connector(SearchField);\r\n","import React, { FC } from 'react';\r\nimport SearchField from '../search-field/search-field';\r\nimport './search-block.scss';\r\n\r\nexport const SearchBlock: FC = () => <section className=\"search-block--wrapper\"><SearchField /></section>;\r\n","import React, { FC } from 'react';\r\nimport { SearchBlock } from '../search-block/search-block';\r\nimport './top-bar.scss';\r\n\r\nexport const TopBar: FC = () => (\r\n  <header className=\"top-bar--wrapper\">\r\n    <div className=\"top-bar--title-wrapper\">\r\n      <h1 className=\"top-bar--title\">Литературбо</h1>\r\n    </div>\r\n    <SearchBlock />\r\n  </header>\r\n);\r\n","import React, { FC } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { ReduxState } from '../../redux/reducer';\r\nimport './loading-indicator.scss';\r\n\r\nconst mapState = (state: ReduxState) => ({\r\n  isLoading: state.isLoading,\r\n});\r\n\r\nconst connector = connect(mapState);\r\n\r\nexport interface LoadingIndicatorProps extends ConnectedProps<typeof connector> {\r\n  isLoading: boolean;\r\n}\r\n\r\nconst LoadingIndicator: FC<LoadingIndicatorProps> = ({ isLoading }) => (\r\n  <div className={`loading-indicator--wrapper${isLoading ? ' loading' : ''}`}>\r\n    <div className=\"loading-indiator--icon-wrapper\">\r\n      <div className=\"loading-indiator--book-wrapper\">\r\n        <div className=\"loading-indiator--book-page left\"></div>\r\n        <div className=\"loading-indiator--book-page right\"></div>\r\n        <div className=\"loading-indiator--book-page middle\"></div>\r\n        <div className=\"loading-indiator--book-cover left\"></div>\r\n        <div className=\"loading-indiator--book-cover right\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default connector(LoadingIndicator);\r\n","import React, { FC } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport SearchResults from './components/search-results/search-results';\nimport { TopBar } from './components/top-bar/top-bar';\nimport LoadingIndicator from './components/loading-indicator/loading-indicator';\nimport { ReduxState } from './redux/reducer';\nimport './app.scss';\n\nconst mapState = (state: ReduxState) => ({\n  searchQuery: state.searchQuery,\n});\n\nconst connector = connect(mapState);\n\nexport interface AppProps extends ConnectedProps<typeof connector> {\n  searchQuery: string | undefined; // optional prop causes error here, union type is used\n}\n\nconst App: FC<AppProps> = ({ searchQuery }) => (\n  <div className=\"app--wrapper\">\n    <div className=\"main-block--wrapper\">\n      <TopBar />\n      <SearchResults searchQuery={searchQuery} />\n      <LoadingIndicator />\n    </div>\n  </div>\n);\n\nexport default connector(App);\n","export const extend = (a: any, b: any) => Object.assign({}, a, b);\r\n","import { extend } from \"../utils/extend\";\r\nimport { ActionType, ReduxAction } from \"./actions\";\r\n\r\nexport type ReduxState = {\r\n  searchQuery?: string;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport type ReduxDispatch = (action: ReduxAction) => void;\r\n\r\nconst initialState: ReduxState = {\r\n  searchQuery: undefined,\r\n  isLoading: false,\r\n};\r\n\r\n\r\nconst reducer = (state: ReduxState = initialState, action: ReduxAction) => {\r\n  switch (action.type) {\r\n    case ActionType.SET_SEARCH_QUERY:\r\n      return extend(state, {\r\n        searchQuery: action.payload,\r\n      });\r\n    case ActionType.SET_LOADING:\r\n      return extend(state, {\r\n        isLoading: action.payload,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport { reducer };\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport { Provider } from \"react-redux\";\nimport { reducer } from \"./redux/reducer.ts\";\nimport { createStore } from \"redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={createStore(reducer)}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}